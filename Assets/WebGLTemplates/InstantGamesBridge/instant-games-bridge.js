(()=>{var e={258:e=>{!function(t){e.exports=t;var r={on:function(e,t){return i(this,e).push(t),this},once:function(e,t){var r=this;return n.originalListener=t,i(r,e).push(n),r;function n(){o.call(r,e,n),t.apply(this,arguments)}},off:o,emit:function(e,t){var r=this,n=i(r,e,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach(u);else if(2===o)n.forEach(c);else{var a=Array.prototype.slice.call(arguments,1);n.forEach(s)}return!!n.length;function u(e){e.call(r)}function c(e){e.call(r,t)}function s(e){e.apply(r,a)}}};function n(e){for(var t in r)e[t]=r[t];return e}function o(e,t){var r,n=this;if(arguments.length){if(t){if(r=i(n,e,!0)){if(!(r=r.filter(a)).length)return o.call(n,e);n.listeners[e]=r}}else if((r=n.listeners)&&(delete r[e],!Object.keys(r).length))return o.call(n)}else delete n.listeners;return n;function a(e){return e!==t&&e.originalListener!==t}}function i(e,t,r){if(!r||e.listeners){var n=e.listeners||(e.listeners={});return n[t]||(n[t]=[])}}n(t.prototype),t.mixin=n}((function e(){if(!(this instanceof e))return new e}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e={VK:"vk",YANDEX:"yandex",TGG:"tgg",MOCK:"mock"},t={PLATFORM:"platform",PLAYER:"player",GAME:"game",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARD:"leaderboard"},n={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed"},o={OPENED:"opened",CLOSED:"closed",FAILED:"failed"},i={OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function c(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,f(e,t,"set"),r),r}function s(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,f(e,t,"get"))}function f(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var l=new WeakMap,p=new WeakMap,y=new WeakMap;const h=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,l,{writable:!0,value:void 0}),u(this,p,{writable:!0,value:void 0}),u(this,y,{writable:!0,value:void 0}),c(this,l,new Promise((function(e,r){c(t,p,e),c(t,y,r)})))}var t,r;return t=e,(r=[{key:"promise",get:function(){return s(this,l)}},{key:"resolve",value:function(e){s(this,p).call(this,e)}},{key:"reject",value:function(e){s(this,y).call(this,e)}}])&&a(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var d=r(258),m=r.n(d);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var w="initialize",P="authorize_player",S="show_interstitial",k="show_rewarded",O="add_to_home_screen",D="rate",j="set_leaderboard_score",E="get_leaderboard_score",A="get_leaderboard_entries",T=new WeakMap,R=function(){function t(e){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,"LOCAL_STORAGE_GAME_DATA_KEY","game_data"),g(this,"_isInitialized",!1),g(this,"_platformSdk",null),g(this,"_localStorage",null),g(this,"_isPlayerAuthorized",!1),g(this,"_playerId",null),g(this,"_playerName",null),g(this,"_playerPhotos",[]),g(this,"_gameData",null),g(this,"_interstitialState",null),g(this,"_rewardedState",null),o={writable:!0,value:{}},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,n=T),n.set(r,o),e&&(this._options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e));try{this._localStorage=window.localStorage}catch(e){}}var r,a;return r=t,(a=[{key:"platformId",get:function(){return e.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var e=navigator.language;return"string"==typeof e?e.substring(0,2):"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"interstitialState",get:function(){return this._interstitialState}},{key:"rewardedState",get:function(){return this._rewardedState}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(e))return"mobile";if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(e))return"tablet"}return"desktop"}},{key:"isLeaderboardSupported",get:function(){return!1}},{key:"isLeaderboardNativePopupSupported",get:function(){return!1}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!1}},{key:"isLeaderboardSetScoreSupported",get:function(){return!1}},{key:"isLeaderboardGetScoreSupported",get:function(){return!1}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"authorizePlayer",value:function(e){return Promise.reject()}},{key:"getGameData",value:function(e){var t=this;return new Promise((function(r){t._loadGameDataFromLocalStorage().finally((function(){if(t._gameData){var n=t._gameData[e];r(void 0!==n?n:null)}else r(null)}))}))}},{key:"setGameData",value:function(e,t){return this._gameData||(this._gameData={}),this._gameData[e]=t,this._saveGameDataToLocalStorage()}},{key:"deleteGameData",value:function(e){return this._gameData?(delete this._gameData[e],this._saveGameDataToLocalStorage()):Promise.resolve()}},{key:"showInterstitial",value:function(){return Promise.reject()}},{key:"showRewarded",value:function(){return Promise.reject()}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(e){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"setLeaderboardScore",value:function(e){return Promise.reject()}},{key:"getLeaderboardScore",value:function(e){return Promise.reject()}},{key:"getLeaderboardEntries",value:function(e){return Promise.reject()}},{key:"showLeaderboardNativePopup",value:function(e){return Promise.reject()}},{key:"_loadGameDataFromLocalStorage",value:function(){var e=this;return new Promise((function(t,r){try{var n=e._localStorage.getItem(e.LOCAL_STORAGE_GAME_DATA_KEY);n&&(e._gameData=JSON.parse(n)),t()}catch(e){r(e)}}))}},{key:"_saveGameDataToLocalStorage",value:function(){var e=this;return new Promise((function(t,r){try{e._localStorage.setItem(e.LOCAL_STORAGE_GAME_DATA_KEY,JSON.stringify(e._gameData)),t()}catch(e){r(e)}}))}},{key:"_setInterstitialState",value:function(e){this._interstitialState===e&&e!==o.FAILED||(this._interstitialState=e,this.emit(n.INTERSTITIAL_STATE_CHANGED,this._interstitialState))}},{key:"_setRewardedState",value:function(e){this._rewardedState===e&&e!==i.FAILED||(this._rewardedState=e,this.emit(n.REWARDED_STATE_CHANGED,this._rewardedState))}},{key:"_canShowAdvertisement",value:function(){return!(this._interstitialState&&this._interstitialState!==o.CLOSED&&this._interstitialState!==o.FAILED||this._rewardedState&&this._rewardedState!==i.CLOSED&&this._rewardedState!==i.FAILED)}},{key:"_createPromiseDecorator",value:function(e){var t=new h;return _(this,T)[e]=t,t}},{key:"_getPromiseDecorator",value:function(e){return _(this,T)[e]}},{key:"_resolvePromiseDecorator",value:function(e,t){_(this,T)[e]&&(_(this,T)[e].resolve(t),delete _(this,T)[e])}},{key:"_rejectPromiseDecorator",value:function(e,t){_(this,T)[e]&&(_(this,T)[e].reject(t),delete _(this,T)[e])}}])&&b(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),t}();m().mixin(R.prototype);const I=R;var L=function(e){return new Promise((function(t){var r=document.createElement("script");r.src=e,r.addEventListener("load",t),document.head.appendChild(r)}))};function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=z(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},G.apply(this,arguments)}function z(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}function W(e,t){return W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},W(e,t)}function M(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function V(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function K(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var H=new WeakSet;function q(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(e);return i||(i=this._createPromiseDecorator(e),this._platformSdk.send(t,n).then((function(t){t[o]?r._resolvePromiseDecorator(e):r._rejectPromiseDecorator(e)})).catch((function(t){r._rejectPromiseDecorator(e,t)}))),i.promise}const U=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(s,t);var r,n,a,u,c=(a=s,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(a);if(u){var r=F(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return M(this,e)});function s(){var e;C(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return V(x(e=c.call.apply(c,[this].concat(r))),H),e}return r=s,(n=[{key:"platformId",get:function(){return e.VK}},{key:"platformLanguage",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("language")){var t=e.searchParams.get("language");try{t=parseInt(t)}catch(e){}switch(t){case 0:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return G(F(s.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var e=new URL(window.location.href);return e.searchParams.has("hash")?e.searchParams.get("hash"):G(F(s.prototype),"platformPayload",this)}},{key:"deviceType",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("platform"))switch(e.searchParams.get("platform")){case"html5_ios":case"html5_android":case"html5_mobile":return"mobile";case"web":return"desktop"}return G(F(s.prototype),"deviceType",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){var e=new URL(window.location.href);return!(!e.searchParams.has("platform")||"html5_android"!==e.searchParams.get("platform"))}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardNativePopupSupported",get:function(){return"mobile"===this.deviceType}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(w);return t||(t=this._createPromiseDecorator(w),L("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){e._platformSdk=window.vkBridge,e._platformSdk.send("VKWebAppInit").then((function(){e._platformSdk.send("VKWebAppGetUserInfo").then((function(t){t&&(e._playerId=t.id,e._playerName=t.first_name+" "+t.last_name,t.photo_100&&e._playerPhotos.push(t.photo_100),t.photo_200&&e._playerPhotos.push(t.photo_200),t.photo_max_orig&&e._playerPhotos.push(t.photo_max_orig))})).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(w)}))}))}))),t.promise}},{key:"authorizePlayer",value:function(e){return Promise.resolve()}},{key:"getGameData",value:function(e){var t=this;return new Promise((function(r){t._platformSdk.send("VKWebAppStorageGet",{keys:[e]}).then((function(e){if(""!==e.keys[0].value){var t;try{t=JSON.parse(e.keys[0].value)}catch(r){t=e.keys[0].value}r(t)}else r(null)})).catch((function(){r(null)}))}))}},{key:"setGameData",value:function(e,t){var r=this;return new Promise((function(n,o){var i={key:e,value:t};"string"!=typeof t&&(i.value=JSON.stringify(t)),r._platformSdk.send("VKWebAppStorageSet",i).then((function(){n()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?o(e.error_data.error_reason):o()}))}))}},{key:"deleteGameData",value:function(e){return this.setGameData(e,"")}},{key:"showInterstitial",value:function(){var e=this;return this._canShowAdvertisement()?K(this,H,q).call(this,S,"VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(){e._setInterstitialState(o.OPENED),e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(t){e._setInterstitialState(t.result?o.CLOSED:o.FAILED)})).catch((function(t){e._setInterstitialState(o.FAILED)}))})):Promise.reject()}},{key:"showRewarded",value:function(){var e=this;return this._canShowAdvertisement()?K(this,H,q).call(this,k,"VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(){e._setRewardedState(i.OPENED),e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result?(e._setRewardedState(i.REWARDED),e._setRewardedState(i.CLOSED)):e._setRewardedState(i.FAILED)})).catch((function(t){e._setRewardedState(i.FAILED)}))})):Promise.reject()}},{key:"inviteFriends",value:function(){return K(this,H,q).call(this,"invite_friends","VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(e){if(!e||!e.groupId)return Promise.reject();var t=e.groupId;return"string"==typeof t&&(t=parseInt(t),isNaN(t))?Promise.reject():K(this,H,q).call(this,"join_community","VKWebAppJoinGroup",{group_id:t}).then((function(){window.open("https://vk.com/public"+t)}))}},{key:"share",value:function(e){var t={};return e&&e.link&&(t.link=e.link),K(this,H,q).call(this,"share","VKWebAppShare",t,"type")}},{key:"createPost",value:function(e){var t={};return e&&e.message&&(t.message=e.message),e&&e.attachments&&(t.attachments=e.attachments),K(this,H,q).call(this,"create_post","VKWebAppShowWallPostBox",t,"post_id")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?K(this,H,q).call(this,O,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return K(this,H,q).call(this,"add_to_favorites","VKWebAppAddToFavorites")}},{key:"showLeaderboardNativePopup",value:function(e){if(!this.isLeaderboardNativePopupSupported)return Promise.reject();if(!e||!e.userResult)return Promise.reject();var t={user_result:e.userResult};return"boolean"==typeof e.global&&(t.global=e.global?1:0),K(this,H,q).call(this,"show_leaderboard_native_popup","VKWebAppShowLeaderBoardBox",t)}}])&&N(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(I);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(){return Q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=Z(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Q.apply(this,arguments)}function Z(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=re(e)););return e}function $(e,t){return $=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$(e,t)}function ee(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return te(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function ne(e,t){ie(e,t),t.add(e)}function oe(e,t,r){ie(e,t),t.set(e,r)}function ie(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ae(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,se(e,t,"set"),r),r}function ue(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function ce(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,se(e,t,"get"))}function se(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var fe=new WeakMap,le=new WeakMap,pe=new WeakMap,ye=new WeakSet,he=new WeakSet;function de(e){var t=this;return new Promise((function(r){var n={scopes:!0};e&&"boolean"==typeof e.scopes&&(n.scopes=e.scopes),t._platformSdk.getPlayer(n).then((function(e){t._playerId=e.getUniqueID(),t._isPlayerAuthorized="lite"!==e.getMode();var r=e.getName();""!==r&&(t._playerName=r),t._playerPhotos=[];var n=e.getPhoto("small"),o=e.getPhoto("medium"),i=e.getPhoto("large");n&&t._playerPhotos.push(n),o&&t._playerPhotos.push(o),i&&t._playerPhotos.push(i),ae(t,le,e)})).finally((function(){r()}))}))}function me(){var e=this;return new Promise((function(t,r){ce(e,le)?ce(e,le).setData(e._gameData).then((function(){t()})).catch((function(e){r(e)})):e._saveGameDataToLocalStorage().then((function(){return t()})).catch((function(e){return r(e)}))}))}const ve=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(s,t);var r,n,a,u,c=(a=s,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=re(a);if(u){var r=re(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ee(this,e)});function s(){var e;J(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ne(te(e=c.call.apply(c,[this].concat(r))),he),ne(te(e),ye),oe(te(e),fe,{writable:!0,value:!1}),oe(te(e),le,{writable:!0,value:null}),oe(te(e),pe,{writable:!0,value:void 0}),e}return r=s,(n=[{key:"platformId",get:function(){return e.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang:Q(re(s.prototype),"platformLanguage",this)}},{key:"deviceType",get:function(){return this._platformSdk?this._platformSdk.deviceInfo.type:Q(re(s.prototype),"deviceType",this)}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return ce(this,fe)}},{key:"isRateSupported",get:function(){return!0}},{key:"isLeaderboardSupported",get:function(){return!0}},{key:"isLeaderboardMultipleBoardsSupported",get:function(){return!0}},{key:"isLeaderboardSetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetScoreSupported",get:function(){return!0}},{key:"isLeaderboardGetEntriesSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(w);return t||(t=this._createPromiseDecorator(w),L("https://yandex.ru/games/sdk/v2").then((function(){window.YaGames.init().then((function(t){e._platformSdk=t;var r=ue(e,ye,de).call(e),n=e._platformSdk.getStorage().then((function(t){e._localStorage=t})),o=e._platformSdk.shortcut.canShowPrompt().then((function(t){ae(e,fe,t.canShow)})),i=e._platformSdk.getLeaderboards().then((function(t){ae(e,pe,t)}));Promise.all([r,n,o,i]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(w)}))}))}))),t.promise}},{key:"authorizePlayer",value:function(e){var t=this,r=this._getPromiseDecorator(P);return r||(r=this._createPromiseDecorator(P),this._isPlayerAuthorized?ue(this,ye,de).call(this,e).then((function(){t._resolvePromiseDecorator(P)})):this._platformSdk.auth.openAuthDialog().then((function(){ue(t,ye,de).call(t,e).then((function(){t._resolvePromiseDecorator(P)}))})).catch((function(e){t._rejectPromiseDecorator(P,e)}))),r.promise}},{key:"getGameData",value:function(e){var t=this;return new Promise((function(r){t._gameData?void 0===t._gameData[e]?r(null):r(t._gameData[e]):ce(t,le)?ce(t,le).getData().then((function(n){t._gameData=n,void 0===t._gameData[e]?r(null):r(t._gameData[e])})).catch((function(){r(null)})):Q(re(s.prototype),"getGameData",t).call(t,e).then((function(e){return r(e)})).catch((function(){return r(null)}))}))}},{key:"setGameData",value:function(e,t){return this._gameData||(this._gameData={}),this._gameData[e]=t,ue(this,he,me).call(this)}},{key:"deleteGameData",value:function(e){return this._gameData?(delete this._gameData[e],ue(this,he,me).call(this)):Promise.resolve()}},{key:"showInterstitial",value:function(){var e=this;if(!this._canShowAdvertisement())return Promise.reject();var t=this._getPromiseDecorator(S);return t||(t=this._createPromiseDecorator(S),this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){e._resolvePromiseDecorator(S),e._setInterstitialState(o.OPENED)},onClose:function(t){t?e._setInterstitialState(o.CLOSED):(e._rejectPromiseDecorator(S),e._setInterstitialState(o.FAILED))}}})),t.promise}},{key:"showRewarded",value:function(){var e=this;if(!this._canShowAdvertisement())return Promise.reject();var t=this._getPromiseDecorator(k);return t||(t=this._createPromiseDecorator(k),this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){e._resolvePromiseDecorator(k),e._setRewardedState(i.OPENED)},onRewarded:function(){e._setRewardedState(i.REWARDED)},onClose:function(){e._setRewardedState(i.CLOSED)},onError:function(t){e._rejectPromiseDecorator(k,t),e._setRewardedState(i.FAILED)}}})),t.promise}},{key:"addToHomeScreen",value:function(){var e=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(O);return t||(t=this._createPromiseDecorator(O),this._platformSdk.shortcut.showPrompt().then((function(t){"accepted"!==t.outcome?e._rejectPromiseDecorator(O):e._resolvePromiseDecorator(O)})).catch((function(t){e._rejectPromiseDecorator(O,t)}))),t.promise}},{key:"rate",value:function(){var e=this,t=this._getPromiseDecorator(D);return t||(t=this._createPromiseDecorator(D),this._platformSdk.feedback.canReview().then((function(t){t.value?e._platformSdk.feedback.requestReview().then((function(t){t.feedbackSent?e._resolvePromiseDecorator(D):e._rejectPromiseDecorator(D)})).catch((function(t){e._rejectPromiseDecorator(D,t)})):e._rejectPromiseDecorator(D,t.reason)})).catch((function(t){e._rejectPromiseDecorator(D,t)}))),t.promise}},{key:"setLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!(ce(this,pe)&&e&&e.score&&e.leaderboardName))return Promise.reject();var r=this._getPromiseDecorator(j);return r||(r=this._createPromiseDecorator(j),"string"==typeof e.score&&(e.score=parseInt(e.score)),ce(this,pe).setLeaderboardScore(e.leaderboardName,e.score).then((function(e){t._resolvePromiseDecorator(j)})).catch((function(e){t._rejectPromiseDecorator(j,e)}))),r.promise}},{key:"getLeaderboardScore",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!ce(this,pe)||!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(E);return r||(r=this._createPromiseDecorator(E),ce(this,pe).getLeaderboardPlayerEntry(e.leaderboardName).then((function(e){t._resolvePromiseDecorator(E,e.score)})).catch((function(e){t._rejectPromiseDecorator(E,e)}))),r.promise}},{key:"getLeaderboardEntries",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();if(!ce(this,pe)||!e||!e.leaderboardName)return Promise.reject();var r=this._getPromiseDecorator(A);if(!r){r=this._createPromiseDecorator(A);var n={includeUser:!1,quantityAround:5,quantityTop:5};"boolean"==typeof e.includeUser&&(n.includeUser=e.includeUser),"string"==typeof e.quantityAround&&(e.quantityAround=parseInt(e.quantityAround)),"number"==typeof e.quantityAround&&(n.quantityAround=e.quantityAround),"string"==typeof e.quantityTop&&(e.quantityTop=parseInt(e.quantityTop)),"number"==typeof e.quantityTop&&(n.quantityTop=e.quantityTop),ce(this,pe).getLeaderboardEntries(e.leaderboardName,n).then((function(e){var r=null;e&&e.entries.length>0&&(r=e.entries.map((function(e){var t=[],r=e.player.getAvatarSrc("small"),n=e.player.getAvatarSrc("medium"),o=e.player.getAvatarSrc("large");return r&&t.push(r),n&&t.push(n),o&&t.push(o),{id:e.player.uniqueID,score:e.score,rank:e.rank,name:e.player.publicName,photos:t}}))),t._resolvePromiseDecorator(A,r)})).catch((function(e){t._rejectPromiseDecorator(A,e)}))}return r.promise}}])&&X(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}(I);function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function we(e,t){return we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},we(e,t)}function Pe(e,t){if(t&&("object"===be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Se(e){return Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Se(e)}const ke=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&we(e,t)}(u,t);var r,n,o,i,a=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Se(o);if(i){var r=Se(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Pe(this,e)});function u(){return ge(this,u),a.apply(this,arguments)}return r=u,(n=[{key:"platformId",get:function(){return e.TGG}},{key:"platformLanguage",get:function(){return"en"}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(w);return t||(t=this._createPromiseDecorator(w),L("https://storage.yandexcloud.net/tgg-sdk/v1.2.0/tggsdk.js").then((function(){e._platformSdk=window.tggsdk,e._platformSdk.initialize().then((function(){e._platformSdk.player.getData().then((function(t){e._playerId=t.id,e._playerName=t.name})).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(w)}))})).catch((function(t){return e._rejectPromiseDecorator(w,t)}))}))),t.promise}},{key:"authorizePlayer",value:function(e){return Promise.resolve()}},{key:"getGameData",value:function(e){var t=this;return new Promise((function(r,n){t._gameData?void 0===t._gameData[e]?r(null):r(t._gameData[e]):t._platformSdk.game.getData().then((function(n){t._gameData=n,void 0===t._gameData[e]?r(null):r(t._gameData[e])})).catch((function(e){n(e)}))}))}},{key:"setGameData",value:function(e,t){return this._gameData||(this._gameData={}),this._gameData[e]=t,this._platformSdk.game.setData(this._gameData)}},{key:"deleteGameData",value:function(e){return this._gameData&&void 0!==this._gameData[e]?(delete this._gameData[e],this._platformSdk.game.setData(this._gameData)):Promise.resolve()}}])&&_e(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(I);function Oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const De=function(){function e(t){var r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=void 0,(r="_platformBridge")in this?Object.defineProperty(this,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[r]=n,this._platformBridge=t}var t,r;return t=e,(r=[{key:"initialize",value:function(){return Promise.resolve()}}])&&Oe(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Te(e,t){return Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Te(e,t)}function Re(e,t){if(t&&("object"===je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ie(e){return Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ie(e)}const Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Te(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ie(n);if(o){var r=Ie(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Re(this,e)});function a(){return Ee(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}}])&&Ae(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(De);function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ge(e,t){return Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ge(e,t)}function ze(e,t){if(t&&("object"===Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function We(e){return We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},We(e)}const Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ge(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=We(n);if(o){var r=We(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ze(this,e)});function a(){return Ce(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"authorize",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.authorize(t)}return this._platformBridge.authorizePlayer(e)}}])&&Ne(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(De);function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ke(e,t){return Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ke(e,t)}function He(e,t){if(t&&("object"===xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}const Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ke(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qe(n);if(o){var r=qe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return He(this,e)});function a(){return Fe(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"getData",value:function(e){return this._platformBridge.getGameData(e)}},{key:"setData",value:function(e,t){return this._platformBridge.setGameData(e,t)}},{key:"deleteData",value:function(e){return this._platformBridge.deleteGameData(e)}}])&&Ve(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(De);function Ye(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Je(e,t){Qe(e,t),t.add(e)}function Xe(e,t,r){Qe(e,t),t.set(e,r)}function Qe(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ze(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function $e(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,tt(e,t,"set"),r),r}function et(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,tt(e,t,"get"))}function tt(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var rt="created",nt="completed",ot=new WeakMap,it=new WeakMap,at=new WeakMap,ut=new WeakMap,ct=new WeakSet,st=new WeakSet,ft=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Je(this,st),Je(this,ct),Xe(this,ot,{writable:!0,value:0}),Xe(this,it,{writable:!0,value:0}),Xe(this,at,{writable:!0,value:rt}),Xe(this,ut,{writable:!0,value:0}),$e(this,ot,t)}var t,r;return t=e,(r=[{key:"state",get:function(){return et(this,at)}},{key:"start",value:function(){var e=this;switch(et(this,at)){case rt:case nt:$e(this,it,et(this,ot)),Ze(this,ct,lt).call(this,"started"),$e(this,ut,setInterval((function(){$e(e,it,et(e,it)-1),e.emit("time_left_changed",et(e,it)),et(e,it)<=0&&(Ze(e,st,pt).call(e),Ze(e,ct,lt).call(e,nt))}),1e3))}}},{key:"stop",value:function(){Ze(this,st,pt).call(this),Ze(this,ct,lt).call(this,"stopped")}}])&&Ye(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function lt(e){$e(this,at,e),this.emit("state_changed",et(this,at))}function pt(){$e(this,it,0),clearInterval(et(this,ut))}m().mixin(ft.prototype);const yt=ft;function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}function dt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mt(e,t){return mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mt(e,t)}function vt(e,t){if(t&&("object"===ht(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bt(e)}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gt(e){return gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},gt(e)}function _t(e,t,r){wt(e,t),t.set(e,r)}function wt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Pt(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function St(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ot(e,t,"set"),r),r}function kt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ot(e,t,"get"))}function Ot(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Dt=new WeakMap,jt=new WeakMap,Et=new WeakSet,At=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mt(e,t)}(u,e);var t,r,o,i,a=(o=u,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gt(o);if(i){var r=gt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return vt(this,e)});function u(e){var t,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),wt(r=bt(t=a.call(this,e)),o=Et),o.add(r),_t(bt(t),Dt,{writable:!0,value:void 0}),_t(bt(t),jt,{writable:!0,value:60}),t._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED,(function(e){return t.emit(n.INTERSTITIAL_STATE_CHANGED,e)})),t._platformBridge.on(n.REWARDED_STATE_CHANGED,(function(e){return t.emit(n.REWARDED_STATE_CHANGED,e)})),t}return t=u,(r=[{key:"interstitialState",get:function(){return this._platformBridge.interstitialState}},{key:"rewardedState",get:function(){return this._platformBridge.rewardedState}},{key:"minimumDelayBetweenInterstitial",get:function(){return kt(this,jt)}},{key:"setMinimumDelayBetweenInterstitial",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.setMinimumDelayBetweenInterstitial(t)}var r=ht(e),n=kt(this,jt);switch(r){case"number":n=e;break;case"string":if(n=parseInt(e),isNaN(n))return}St(this,jt,n),kt(this,Dt)&&(kt(this,Dt).stop(),Pt(this,Et,Tt).call(this))}},{key:"showInterstitial",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showInterstitial(t)}var r=!1;return e&&"boolean"==typeof e.ignoreDelay&&(r=e.ignoreDelay),kt(this,Dt)&&kt(this,Dt).state!==nt&&!r?Promise.reject():(kt(this,jt)>0&&Pt(this,Et,Tt).call(this),this._platformBridge.showInterstitial())}},{key:"showRewarded",value:function(){return this._platformBridge.showRewarded()}}])&&dt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(De);function Tt(){St(this,Dt,new yt(kt(this,jt))),kt(this,Dt).start()}m().mixin(At.prototype);const Rt=At;function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ct(e,t){return Ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ct(e,t)}function Nt(e,t){if(t&&("object"===It(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Gt(e){return Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Gt(e)}const zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ct(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gt(n);if(o){var r=Gt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Nt(this,e)});function a(){return Lt(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"inviteFriends",value:function(){return this._platformBridge.inviteFriends()}},{key:"joinCommunity",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.joinCommunity(t)}return this._platformBridge.joinCommunity(e)}},{key:"share",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.share(t)}return this._platformBridge.share(e)}},{key:"createPost",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.createPost(t)}return this._platformBridge.createPost(e)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&Bt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(De);function Wt(e){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(e)}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ft(e,t){return Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ft(e,t)}function Vt(e,t){if(t&&("object"===Wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Kt(e){return Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Kt(e)}const Ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ft(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Kt(n);if(o){var r=Kt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Vt(this,e)});function a(){return Mt(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}}])&&xt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(De);function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jt(e,t){return Jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Jt(e,t)}function Xt(e,t){if(t&&("object"===qt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Qt(e){return Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Qt(e)}const Zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qt(n);if(o){var r=Qt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Xt(this,e)});function a(){return Ut(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isLeaderboardSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isLeaderboardNativePopupSupported}},{key:"isMultipleBoardsSupported",get:function(){return this._platformBridge.isLeaderboardMultipleBoardsSupported}},{key:"isSetScoreSupported",get:function(){return this._platformBridge.isLeaderboardSetScoreSupported}},{key:"isGetScoreSupported",get:function(){return this._platformBridge.isLeaderboardGetScoreSupported}},{key:"isGetEntriesSupported",get:function(){return this._platformBridge.isLeaderboardGetEntriesSupported}},{key:"setScore",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.setScore(t)}return this._platformBridge.setLeaderboardScore(e)}},{key:"getScore",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getScore(t)}return this._platformBridge.getLeaderboardScore(e)}},{key:"getEntries",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getEntries(t)}return this._platformBridge.getLeaderboardEntries(e)}},{key:"showNativePopup",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showNativePopup(t)}return this._platformBridge.showLeaderboardNativePopup(e)}}])&&Yt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(De);function $t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rr(e,t){or(e,t),t.add(e)}function nr(e,t,r){or(e,t),t.set(e,r)}function or(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ir(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,cr(e,t,"set"),r),r}function ar(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function ur(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,cr(e,t,"get"))}function cr(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var sr=new WeakMap,fr=new WeakMap,lr=new WeakMap,pr=new WeakMap,yr=new WeakMap,hr=new WeakSet,dr=new WeakSet;function mr(){var t=e.MOCK;if(this._options&&this._options.forciblySetPlatformId)t=this._options.forciblySetPlatformId;else{var r=new URL(window.location.href),n=["g","a","m","e","s",".","s","3",".","y","a","n","d","e","x",".","n","e","t"].join("");r.hostname.includes(n)?t=e.YANDEX:r.searchParams.has("api_id")&&r.searchParams.has("viewer_id")&&r.searchParams.has("auth_key")?t=e.VK:r.searchParams.has("platform")&&"tgg"===r.searchParams.get("platform")&&(t=e.TGG)}switch(t){case e.VK:ir(this,lr,new U(this._options&&this._options.platforms&&this._options.platforms.vk));break;case e.YANDEX:ir(this,lr,new ve(this._options&&this._options.platforms&&this._options.platforms.yandex));break;case e.TGG:ir(this,lr,new ke(this._options&&this._options.platforms&&this._options.platforms.tgg));break;case e.MOCK:ir(this,lr,new I)}}function vr(e){return ur(this,yr)[e]?ur(this,yr)[e]:ur(this,pr)[e]}const br=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),rr(this,dr),rr(this,hr),nr(this,sr,{writable:!0,value:!1}),nr(this,fr,{writable:!0,value:null}),nr(this,lr,{writable:!0,value:null}),nr(this,pr,{writable:!0,value:{}}),nr(this,yr,{writable:!0,value:{}})}var a,u;return a=r,u=[{key:"version",get:function(){return"1.4.6"}},{key:"isInitialized",get:function(){return ur(this,sr)}},{key:"platform",get:function(){return ar(this,dr,vr).call(this,t.PLATFORM)}},{key:"player",get:function(){return ar(this,dr,vr).call(this,t.PLAYER)}},{key:"game",get:function(){return ar(this,dr,vr).call(this,t.GAME)}},{key:"advertisement",get:function(){return ar(this,dr,vr).call(this,t.ADVERTISEMENT)}},{key:"social",get:function(){return ar(this,dr,vr).call(this,t.SOCIAL)}},{key:"device",get:function(){return ar(this,dr,vr).call(this,t.DEVICE)}},{key:"leaderboard",get:function(){return ar(this,dr,vr).call(this,t.LEADERBOARD)}},{key:"PLATFORM_ID",get:function(){return e}},{key:"MODULE_NAME",get:function(){return t}},{key:"EVENT_NAME",get:function(){return n}},{key:"INTERSTITIAL_STATE",get:function(){return o}},{key:"REWARDED_STATE",get:function(){return i}},{key:"initialize",value:function(e){var r=this;return ur(this,sr)?Promise.resolve():(ur(this,fr)||(ir(this,fr,new h),this._options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(r),!0).forEach((function(t){er(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),ar(this,hr,mr).call(this),ur(this,lr).initialize().then((function(){ur(r,pr)[t.PLATFORM]=new Le(ur(r,lr)),ur(r,pr)[t.PLAYER]=new Me(ur(r,lr)),ur(r,pr)[t.GAME]=new Ue(ur(r,lr)),ur(r,pr)[t.ADVERTISEMENT]=new Rt(ur(r,lr)),ur(r,pr)[t.SOCIAL]=new zt(ur(r,lr)),ur(r,pr)[t.DEVICE]=new Ht(ur(r,lr)),ur(r,pr)[t.LEADERBOARD]=new Zt(ur(r,lr)),ir(r,sr,!0),console.log("%c InstantGamesBridge v."+r.version+" initialized. ","background: #01A5DA; color: white"),ur(r,fr)&&(ur(r,fr).resolve(),ir(r,fr,null))}))),ur(this,fr).promise)}},{key:"overrideModule",value:function(e,t){if(ur(this,sr)){var r=ur(this,pr)[e];r&&(ur(this,yr)[e]=t,"function"==typeof t.initialize&&t.initialize(r))}}}],u&&tr(a.prototype,u),Object.defineProperty(a,"prototype",{writable:!1}),r}();window.instantGamesBridge=window.bridge=new br})()})();